---
#
# TODO: Add user variables to the calico manifest to
#       adjust items needed when working on bare metal
#       vm type systems.
#
- name: Install Operator
  ansible.builtin.shell: |
    kubectl apply -f https://projectcalico.docs.tigera.io/manifests/tigera-operator.yaml
  tags:
    - install
    - update

- name: Create custom-resources for our cluster
  ansible.builtin.template:
    src: "templates/{{ item }}.tmpl"
    dest: "/tmp/{{ item }}.yaml"
  with_items:
    - custom-resources
  tags:
    - install
    - update

- name: Apply custom-resources
  ansible.builtin.shell: |
    kubectl apply -f /tmp/custom-resources.yaml
  tags:
    - install
    - update
